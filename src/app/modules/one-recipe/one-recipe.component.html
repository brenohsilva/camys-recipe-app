<main class="p-2">
  <mat-dialog-content class="mat-typography rounded-5">
    <div 
      class="d-flex flex-column m-4 align-items-center justify-content-center"
    >
      <div class="">
        <div class="d-flex justify-content-center">
          <img class="" src="../../../assets/plate.png" width="40%" alt="" />
        </div>
        <div
          style="background-color: #f5c57d6c; max-width: 30rem "
          class="d-flex m-auto flex-column align-items-center rounded-top-3 p-2"
        >
          <div class="d-flex justify-content-center flex-column align-items-center p-2">
            <h3>{{ recipes.name }}</h3>
            <div class="d-flex gap-4 m-2">
              <div
                class="d-flex flex-column justify-content-center align-items-center m-1"
              >
                <span class="material-symbols-outlined">schedule</span>
                <span class="mt-2"> {{ recipes.time }} min</span>
              </div>
              <div class="vr mt-3" style="height: 50px"></div>
              <div
                class="d-flex flex-column justify-content-center align-items-center m-2 p-2"
              >
                <span class="material-symbols-outlined">person</span>
                <span class="mt-2"> {{ recipes.portions }} pessoas</span>
              </div>
            </div>
          </div>

          <div
            class="d-flex gap-4 justify-content-center rounded-4 p-2 m-2 mb-0 px-1 w-75"
            style="background-color: #fae5c7"
          >
            <button
              (click)="changingToIngredients()"
              [ngClass]="typeOfIngredients ? 'btn-primary' : ''"
              class="btn px-3 rounded-5 text-black text-decoration-none"
            >
              <span >Ingredientes</span>
            </button>
            <button
              (click)="changingToSteps()"
              [ngClass]="typeOfSteps ? 'btn-primary' : ''"
              class="btn px-3 rounded-5 text-black text-decoration-none"
            >
              <span>Passos</span>
            </button>
          </div>

          <div
            [ngClass]="recipes.type == 2 ? '' : 'd-none'"
            class="d-flex gap-4 rounded-4 p-2 m-2 justify-content-center"
          >
            <div class="p-1 rounded-4" style="background-color: #fae5c7">
              <button
                (click)="changingToDough()"
                [ngClass]="dough ? 'btn-primary' : ''"
                class="btn pt-1 ps-3 pe-3 pb-0 rounded-5 text-black text-decoration-none"
              >
                <h6 class="fs-6">Massa</h6>
              </button>
              <button
                (click)="changingToFilling()"
                [ngClass]="filling ? 'btn-primary' : ''"
                class="btn pt-1 ps-3 pe-3 pb-0 rounded-5 text-black text-decoration-none"
              >
                <h6>Recheio</h6>
              </button>
            </div>
          </div>

          <div
            [ngClass]="typeOfIngredients ? '' : 'd-none'"
            class="d-flex flex-column justify-content-center align-items-center m-3 gap-3"
          >
            @if (dough) { @for (ingredients of
            doughIngredients; track $index) {
            <span
              class="p-1 ps-3 pe-3 rounded-5"
              style="background-color: #fae5c7"
            >
              {{ ingredients.name }}
            </span>
            } } @if (filling) { @for (ingredients of
            fillingIngredients; track $index) {
            <span
              class="p-1 ps-3 pe-3 rounded-5"
              style="background-color: #fae5c7"
            >
              {{ ingredients.name }}
            </span>
            } }
          </div>

          <div
            [ngClass]="typeOfSteps ? '' : 'd-none'"
            class="d-flex flex-column w-100 px-4 gap-3 mt-2"
          >
            @if (dough) { @for (steps of doughSteps; let idx
            = $index ;track steps.step) {
            <div class="d-flex gap-3 mb-3">
              <div class="">
                <button
                  [id]="'btn_edit_' + steps.id"
                  (click)="checkbutton(steps.id)"
                  class="btn p-0 m-0 rounded-5"
                  [class]
                >
                  @if (selectedStepIds.includes(steps.id) ) {
                  <span class="material-symbols-outlined"> check_circle </span>
                  } @else {
                  <span
                    class="material-symbols-outlined"
                    style="color: #f1c991"
                  >
                    radio_button_unchecked
                  </span>
                  }
                </button>
              </div>
              <div class="d-flex flex-column">
                <span class="fw-bold">Passo {{ idx + 1 }}</span>
                <div
                  class="p-1 pe-3 rounded-3"
                  style="background-color: #fae5c7"
                >
                  <span class="">{{ steps.step }} </span>
                </div>
              </div>
            </div>

            }} @if (filling) { @for (steps of fillingSteps;;
            let idx = $index; track steps.step) {
            <div class="d-flex gap-3 mb-3">
              <div class="">
                <button
                  [id]="'btn_edit_' + steps.id"
                  (click)="checkbutton(steps.id)"
                  class="btn p-0 m-0 rounded-5"
                  [class]
                >
                  @if (selectedStepIds.includes(steps.id) ) {
                  <span class="material-symbols-outlined"> check_circle </span>
                  } @else {
                  <span
                    class="material-symbols-outlined"
                    style="color: #f1c991"
                  >
                    radio_button_unchecked
                  </span>
                  }
                </button>
              </div>
              <div class="d-flex flex-column">
                <span class="fw-bold">Passo {{ idx + 1 }}</span>
                <div
                  class="p-1 pe-3 rounded-3"
                  style="background-color: #fae5c7"
                >
                  <span class="">{{ steps.step }} </span>
                </div>
              </div>
            </div>
            } }
          </div>
        </div>
        <div class="d-flex justify-content-between mt-2">
          <button
            mat-button
            
            class="btn rounded-4 px-4 py-1 fw-medium fs-6 "
            mat-dialog-close
          >
            Fechar
          </button>
          <button
            mat-button
            [routerLink]="['/recipe', recipes.id]"
            class="btn rounded-4 px-4 py-1 fw-medium fs-6 "
            mat-dialog-close
          >
            Ver completa
          </button>
        </div>
      </div>
    </div>
  </mat-dialog-content>
</main>
